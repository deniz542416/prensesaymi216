<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÜRK_satım | VIP Profesyonel İlan Sistemi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --ts-navy: #002f34;
            --ts-blue: #3273dd;
            --ts-red: #e30a17;
            --ts-bg: #f4f6f7;
            --ts-gray: #6c757d;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
        body { background-color: #fff; overflow-x: hidden; }

        /* --- LOGO --- */
        .logo-wrapper { display: flex; align-items: center; gap: 12px; text-decoration: none; justify-content: center; }
        .flag-circle {
            width: 40px; height: 40px; border-radius: 50%; background: var(--ts-red);
            display: flex; justify-content: center; align-items: center; position: relative;
            box-shadow: 0 2px 8px rgba(227, 10, 23, 0.3); overflow: hidden; border: 2px solid #fff;
        }
        .moon { width: 18px; height: 18px; border-radius: 50%; box-shadow: -4px 0 0 0 white; position: absolute; left: 12px; }
        .star { color: white; font-size: 10px; position: absolute; right: 8px; top: 14px; }
        .logo-text { font-size: 32px; font-weight: 900; color: var(--ts-navy); }
        .logo-text span { color: var(--ts-red); }

        /* --- GİRİŞ --- */
        #login-page { background-color: var(--ts-bg); display: flex; justify-content: center; align-items: center; min-height: 100vh; position: fixed; width: 100%; top: 0; z-index: 2000; }
        .login-container { background: white; width: 100%; max-width: 450px; padding: 40px; border-radius: 12px; box-shadow: 0 8px 30px rgba(0,0,0,0.1); text-align: center; }

        /* --- HEADER --- */
        header { background: #fff; padding: 15px 10%; border-bottom: 1px solid #ddd; display: flex; align-items: center; gap: 20px; position: sticky; top:0; z-index: 100; }
        .search-container { flex: 1; display: flex; border: 2px solid var(--ts-navy); border-radius: 8px; overflow: hidden; }
        .search-container input { flex: 1; padding: 10px; border: none; outline: none; }
        .search-container button { background: var(--ts-navy); color: white; border: none; padding: 0 20px; cursor: pointer; }

        .user-menu { position: relative; cursor: pointer; display: flex; align-items: center; gap: 8px; margin-left: 15px; }
        .settings-dropdown { 
            position: absolute; top: 100%; right: 0; background: white; border: 1px solid #ddd; 
            width: 200px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); display: none; margin-top: 10px;
        }
        .settings-dropdown a { display: block; padding: 12px; text-decoration: none; color: #333; font-size: 14px; border-bottom: 1px solid #eee; }

        /* --- ANA SAYFA DÜZENİ --- */
        .main-container { display: flex; padding: 20px 10%; gap: 30px; }
        .sidebar { width: 250px; border-right: 1px solid #eee; padding-right: 15px; }
        .brand-list { list-style: none; height: 75vh; overflow-y: auto; }
        .brand-item { padding: 10px; border-bottom: 1px solid #f8f9fa; cursor: pointer; border-radius: 6px; font-size: 14px; transition: 0.2s; }
        .brand-item:hover { background: #f0f7ff; color: var(--ts-blue); }

        /* --- İLAN KARTLARI --- */
        .listing-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 20px; margin-top: 20px; }
        .ad-card { border: 1px solid #eee; border-radius: 8px; overflow: hidden; transition: 0.3s; background: #fff; cursor: pointer;}
        .ad-card:hover { box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        .ad-card img { width: 100%; height: 150px; object-fit: cover; }
        .ad-card-body { padding: 12px; }
        .ad-price { color: var(--ts-blue); font-weight: 900; font-size: 18px; }
        .ad-title { font-weight: bold; margin: 5px 0; font-size: 14px; }
        .ad-info { font-size: 11px; color: #777; line-height: 1.4; }

        /* --- FORM VE ÖDEME --- */
        .grid-detail { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; }
        .payment-box { background: #f9f9f9; padding: 20px; border-radius: 12px; margin-top: 25px; border: 1px solid #ddd; }
        .credit-card-inputs { display: grid; grid-template-columns: 2fr 1fr 1fr; gap: 10px; margin-top: 10px; }
        
        .form-group { margin-bottom: 12px; text-align: left; }
        .form-group label { display: block; font-size: 11px; font-weight: bold; margin-bottom: 4px; color: var(--ts-navy); }
        input, select, textarea { width: 100%; padding: 8px; border: 1px solid #ccc; border-radius: 6px; outline: none; font-size: 13px; }
        
        .btn { padding: 12px 20px; border-radius: 8px; cursor: pointer; font-weight: bold; border: none; transition: 0.3s; }
        .btn-blue { background: var(--ts-blue); color: white; }
        .btn-navy { background: var(--ts-navy); color: white; width: 100%; margin-top: 15px; }

        .photo-preview-container { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; border: 2px dashed #ccc; padding: 15px; min-height: 100px; border-radius: 8px; }
        .preview-img { width: 80px; height: 80px; object-fit: cover; border-radius: 4px; }
    </style>
</head>
<body>

    <div id="login-page">
        <div class="login-container">
            <div class="logo-wrapper" style="margin-bottom: 30px;">
                <div class="flag-circle"><div class="moon"></div><i class="fa-solid fa-star star"></i></div>
                <div class="logo-text">TÜRK<span>_satım</span></div>
            </div>
            <form id="loginForm">
                <div class="form-group"><label>Kullanıcı Adı</label><input type="text" id="userInput" required></div>
                <div class="form-group"><label>Gmail Adresi</label><input type="email" id="emailInput" required></div>
                <div class="form-group"><label>Şifre</label><input type="password" required></div>
                <button type="submit" class="btn btn-blue" style="width:100%">Giriş Yap</button>
            </form>
        </div>
    </div>

    <div id="main-page" style="display:none">
        <header>
            <div class="logo-text" style="font-size: 22px;">TÜRK<span>_satım</span></div>
            <div class="search-container"><input type="text" placeholder="İlan ara..."><button><i class="fa-solid fa-magnifying-glass"></i></button></div>
            <button class="btn btn-blue" onclick="openPanel('listing-panel')">+ İlan Ver</button>
            <div class="user-menu" onclick="toggleDropdown()">
                <i class="fa-solid fa-circle-user" style="font-size: 26px;"></i>
                <span id="displayName" style="font-weight: bold;"></span>
                <div class="settings-dropdown" id="myDropdown">
                    <a href="#" onclick="openPanel('settings-panel')">İlanlarım / Ayarlar</a>
                    <a href="#" onclick="logout()" style="color: red;">Güvenli Çıkış</a>
                </div>
            </div>
        </header>

        <div class="main-container">
            <aside class="sidebar"><div class="brand-list" id="brandLinks"></div></aside>
            <main style="flex:1">
                <div id="default-view">
                    <h2 id="catTitle" style="margin-bottom:20px;">Vitrin</h2>
                    <div id="adDisplay" class="listing-grid"></div>
                </div>

                <div id="listing-panel" style="display:none;">
                    <div style="display:flex; justify-content:space-between; align-items:center;">
                        <h3>Yeni İlan Detayları</h3>
                        <button class="btn" style="background:#eee" onclick="closePanels()">Kapat</button>
                    </div>
                    <form onsubmit="saveAd(event)">
                        <div class="grid-detail" style="margin-top:15px;">
                            <div class="form-group"><label>Marka</label><select id="adBrand"></select></div>
                            <div class="form-group"><label>Model</label><input type="text" id="adModel" placeholder="Örn: C180" required></div>
                            <div class="form-group"><label>Yıl</label><input type="number" id="adYear" placeholder="2024" required></div>
                            
                            <div class="form-group"><label>Yakıt Tipi</label>
                                <select id="adFuel">
                                    <option value="Benzin" selected>Benzin</option>
                                    <option value="Dizel">Dizel</option>
                                    <option value="Hibrit">Hibrit</option>
                                    <option value="Elektrik">Elektrik</option>
                                </select>
                            </div>
                            <div class="form-group"><label>Vites</label>
                                <select id="adGear">
                                    <option value="Otomatik" selected>Otomatik</option>
                                    <option value="Manuel">Manuel</option>
                                </select>
                            </div>
                            <div class="form-group"><label>Kasa Tipi</label>
                                <select id="adBody">
                                    <option value="Sedan">Sedan</option>
                                    <option value="SUV">SUV</option>
                                    <option value="Hatchback">Hatchback</option>
                                </select>
                            </div>

                            <div class="form-group"><label>Kilometre</label><input type="number" id="adKm" placeholder="0" required></div>
                            <div class="form-group"><label>Renk</label><input type="text" id="adColor" placeholder="Beyaz" required></div>
                            <div class="form-group"><label>Fiyat (USD)</label><input type="number" id="adPrice" placeholder="50000" required></div>
                        </div>

                        <div class="form-group"><label>Fotoğraflar</label><input type="file" id="imgInput" multiple accept="image/*" onchange="previewImages(this)"></div>
                        <div class="photo-preview-container" id="previewArea"></div>

                        <div class="payment-box">
                            <label style="font-weight:bold;">Güvenli Ödeme (100 USD)</label>
                            <div class="credit-card-inputs">
                                <input type="text" placeholder="Kart No" maxlength="16" required>
                                <input type="text" placeholder="AA/YY" maxlength="5" required>
                                <input type="text" placeholder="CVV" maxlength="3" required>
                            </div>
                            <button type="submit" class="btn btn-navy">Öde ve Yayınla</button>
                        </div>
                    </form>
                </div>

                <div id="settings-panel" style="display:none;">
                    <button class="btn" onclick="closePanels()" style="background:#eee; margin-bottom:20px;">← Geri Gel</button>
                    <h3>İlanlarımı Yönet</h3>
                    <div id="myAdsManager" style="margin-top:20px;"></div>
                </div>
            </main>
        </div>
    </div>

    <script>
        const brands = ["Alfa Romeo", "Audi", "BMW", "Chery", "Chevrolet", "Citroën", "Cupra", "Dacia", "Ferrari", "Fiat", "Ford", "Honda", "Hyundai", "Jeep", "Kia", "Lamborghini", "Land Rover", "Mercedes-Benz", "Nissan", "Opel", "Peugeot", "Porsche", "Renault", "Skoda", "Tesla", "Togg", "Toyota", "Volkswagen", "Volvo"];
        let allAds = JSON.parse(localStorage.getItem('databaseAds')) || [];
        let tempImages = [];

        window.onload = () => {
            const user = localStorage.getItem('activeUser');
            if (user) showMain(user);
            renderBrands();
            showCategoryAds('Vitrin');
        };

        function renderBrands() {
            const list = document.getElementById('brandLinks');
            const select = document.getElementById('adBrand');
            list.innerHTML = ""; select.innerHTML = "";
            brands.sort().forEach(b => {
                list.innerHTML += `<div class="brand-item" onclick="showCategoryAds('${b}')">${b}</div>`;
                select.innerHTML += `<option value="${b}">${b}</option>`;
            });
        }

        function previewImages(input) {
            const area = document.getElementById('previewArea');
            area.innerHTML = ""; tempImages = [];
            Array.from(input.files).forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    tempImages.push(e.target.result);
                    area.innerHTML += `<img src="${e.target.result}" class="preview-img">`;
                };
                reader.readAsDataURL(file);
            });
        }

        function saveAd(e) {
            e.preventDefault();
            const ad = { 
                id: Date.now(), 
                user: localStorage.getItem('activeUser'), 
                brand: document.getElementById('adBrand').value, 
                model: document.getElementById('adModel').value, 
                year: document.getElementById('adYear').value, 
                fuel: document.getElementById('adFuel').value,
                gear: document.getElementById('adGear').value,
                km: document.getElementById('adKm').value,
                color: document.getElementById('adColor').value,
                price: document.getElementById('adPrice').value, 
                img: tempImages[0] || 'https://via.placeholder.com/300x200?text=No+Photo' 
            };
            allAds.push(ad);
            localStorage.setItem('databaseAds', JSON.stringify(allAds));
            alert("İlanınız başarıyla paylaşıldı!");
            location.reload();
        }

        function showCategoryAds(brand) {
            closePanels();
            document.getElementById('catTitle').innerText = brand;
            const display = document.getElementById('adDisplay');
            const filtered = brand === 'Vitrin' ? allAds : allAds.filter(a => a.brand === brand);
            display.innerHTML = filtered.length ? "" : "<p style='padding:20px; color:#999'>Bu marka için ilan bulunmuyor.</p>";
            filtered.forEach(ad => {
                display.innerHTML += `
                    <div class="ad-card">
                        <img src="${ad.img}">
                        <div class="ad-card-body">
                            <div class="ad-price">${Number(ad.price).toLocaleString()} USD</div>
                            <div class="ad-title">${ad.brand} ${ad.model}</div>
                            <div class="ad-info">
                                ${ad.year} | ${ad.fuel} | ${ad.gear}<br>
                                ${Number(ad.km).toLocaleString()} KM | ${ad.color}
                            </div>
                        </div>
                    </div>`;
            });
        }

        function renderMyAds() {
            const container = document.getElementById('myAdsManager');
            const myAds = allAds.filter(a => a.user === localStorage.getItem('activeUser'));
            container.innerHTML = myAds.length ? "" : "Henüz bir ilanınız yok.";
            myAds.forEach(ad => {
                container.innerHTML += `<div style="display:flex; justify-content:space-between; padding:12px; border:1px solid #eee; margin-bottom:8px; border-radius:8px; background:#fff;"><span><strong>${ad.brand} ${ad.model}</strong> (${ad.price} USD)</span><button class="btn" style="background:var(--ts-red); color:white; padding:5px 12px; font-size:12px;" onclick="deleteAd(${ad.id})">İlanı Kaldır</button></div>`;
            });
        }

        function deleteAd(id) {
            if(confirm("Bu ilanı silmek istediğinize emin misiniz?")) {
                allAds = allAds.filter(a => a.id !== id);
                localStorage.setItem('databaseAds', JSON.stringify(allAds));
                renderMyAds();
            }
        }

        function openPanel(id) {
            document.getElementById('default-view').style.display = 'none';
            document.getElementById('listing-panel').style.display = id === 'listing-panel' ? 'block' : 'none';
            document.getElementById('settings-panel').style.display = id === 'settings-panel' ? 'block' : 'none';
            if(id === 'settings-panel') renderMyAds();
        }

        function closePanels() {
            document.getElementById('listing-panel').style.display = 'none';
            document.getElementById('settings-panel').style.display = 'none';
            document.getElementById('default-view').style.display = 'block';
        }

        function showMain(user) {
            document.getElementById('login-page').style.display = 'none';
            document.getElementById('main-page').style.display = 'block';
            document.getElementById('displayName').innerText = user;
        }

        function logout() { localStorage.removeItem('activeUser'); location.reload(); }
        function toggleDropdown() { const d = document.getElementById('myDropdown'); d.style.display = d.style.display === 'block' ? 'none' : 'block'; }
        document.getElementById('loginForm').onsubmit = (e) => { e.preventDefault(); const u = document.getElementById('userInput').value; localStorage.setItem('activeUser', u); showMain(u); };
    </script>
</body>
</html>